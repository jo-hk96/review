<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>영화리뷰하기</title>
</head>
<style>
	.rating-area {
	    font-size: 2em; /* 별 크기 설정 */
	    color: #ccc;    /* 기본 색상: 회색 (비활성화) */
	    cursor: pointer;
	    user-select: none; /* 드래그 방지 */
	}
	
	/* 개별 별 스타일 */
	.star {
	    transition: color 0.2s;
	}
	
	/* 마우스 오버되거나 'on' 클래스가 붙은 별에만 색상 적용 */
	.rating-area:hover .star {
	    color: gold; /* 마우스가 영역에 올라가면 기본 색상 지정 */
	}
	
	/* 'on' 클래스가 붙거나, 그 이전 별들 */
	.star.on {
	    color: gold;
	}
	
	/* 마우스가 특정 별 위에 있을 때, 그 별과 그 앞의 모든 별에 색상 적용 */
	.rating-area .star:hover ~ .star {
	    color: #ccc; /* 마우스가 지나간 뒤의 별은 다시 회색으로 */
	}

</style>
<body>
	    <div id="movie-detail-container">
	        <p>상세정보 불러오는중</p>
	    </div>
	    
	  <form action="/UserReview" method = "POST">
	  		<h3>리뷰쓰기</h3>
	  		글쓴이 : <input type = "text" ><br>
	  		내용   : <textarea rows = "5" cols = "30"></textarea><br>
		  	별점:	<div class="rating-area">
					    <span class="star" data-rating="1">★</span>
					    <span class="star" data-rating="2">★</span>
					    <span class="star" data-rating="3">★</span>
					    <span class="star" data-rating="4">★</span>
					    <span class="star" data-rating="5">★</span>
					</div>
					<input type="hidden" id="selected-rating" name="rating" value="0">
	  </form>
	    
		<hr>
        <table>
            <tr>
                <td><b>닉네임:남자라면제육</b></td>
            </tr>
            <tr>
                <td>별점 : ⭐⭐⭐⭐⭐</td>
            </tr>
            <tr>
                <td>
                    <p>연기 지리네요 ㄷㄷ 스토리도 잘 짜여진 거 같고 추첩합니당</p>
                </td>
            </tr>
        </table>

        
        

<script>
	document.addEventListener('DOMContentLoaded', () => {
	    const ratingArea = document.querySelector('.rating-area');
	    const stars = ratingArea.querySelectorAll('.star');
	    const ratingInput = document.getElementById('selected-rating');
	
	    // ⭐️ 1. 초기 로딩 시 별점 상태 설정
	    // 만약 수정 페이지라면 초기 값으로 별을 'on' 상태로 만들어줘야 합니다.
	    let currentRating = parseInt(ratingInput.value) || 0;
	    highlightStars(currentRating);
	
	
	    // ⭐️ 2. 별 클릭 이벤트 처리
	    ratingArea.addEventListener('click', (event) => {
	        if (event.target.classList.contains('star')) {
	            const clickedRating = parseInt(event.target.dataset.rating);
	            
	            // 현재 별점을 업데이트하고 화면에 반영
	            currentRating = clickedRating;
	            ratingInput.value = currentRating; // Hidden Input에 값 저장
	            highlightStars(currentRating);
	        }
	    });
	
	    // ⭐️ 3. 마우스 오버 효과 (선택된 별만 색칠)
	    ratingArea.addEventListener('mouseover', (event) => {
	        if (event.target.classList.contains('star')) {
	            const hoveredRating = parseInt(event.target.dataset.rating);
	            highlightStars(hoveredRating);
	        }
	    });
	
	    // ⭐️ 4. 마우스가 영역을 벗어났을 때 원래의 선택된 별점으로 돌아감
	    ratingArea.addEventListener('mouseout', () => {
	        highlightStars(currentRating);
	    });
	
	
	    // ⭐️ 별을 활성화(색칠)하는 핵심 함수
	    function highlightStars(ratingValue) {
	        stars.forEach((star) => {
	            const starRating = parseInt(star.dataset.rating);
	            
	            // 현재 별점 값보다 작거나 같으면 'on' 클래스 추가
	            if (starRating <= ratingValue) {
	                star.classList.add('on');
	            } else {
	                star.classList.remove('on');
	            }
	        });
	    }
	
	});
</script>	    
	    
	    
	    
<script src="/js/movies_detail.js"></script>
</body>
</html>
