<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
                  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%2210 0 100 100%22><text y=%22.90em%22 font-size=%2290%22>ğŸ¬</text></svg>"></link>
    <title>ë¦¬ë·°í”ŒëŸ¬ìŠ¤ ê´€ë¦¬ì</title>
</head>
<style>
/* í…Œì´ë¸” ìŠ¤í¬ë¡¤,th td ì¹¸ í¬ê¸° ì§€ì •  */	
#table {
  table-layout: fixed; 
  width: 100%; 
}

#tableMovie thead {
  display: table;
  width: calc(100% - 20px); 
  table-layout: fixed; 
}

#tableMovie tbody {
  display: block;
  max-height: 400px;
  overflow-y: scroll;
  width: 100%; 
}

#tableMovie tbody tr {
  display: table;
  width: 100%;
  table-layout: fixed; 
}

#tableMovie thead th:nth-child(1),
#tableMovie tbody td:nth-child(1) {
    width: 17%;
}

#tableMovie thead th:nth-child(2),
#tableMovie tbody td:nth-child(2) {
    width: 17%;
}

#tableMovie thead th:nth-child(3),
#tableMovie tbody td:nth-child(3) {
    width: 20%; 
}
#tableMovie thead th:nth-child(4),
#tableMovie tbody td:nth-child(4) {
    width: 20%; 
}
#tableMovie thead th:nth-child(5),
#tableMovie tbody td:nth-child(5) {
    width: 20%;
}
</style>  


<body>
	<div id="header" th:fragment = "header">
		<div class="nav">
			<ul class="nav1">
				<li><a href="/"><img src="/images/logo.png" alt="logo" class="logoimg"></a></li>
				<li><a href="/Admin/AdminHome">ê´€ë¦¬ì í™ˆ</a></li>
				<li class="emphasis-color"><a href="/logout">ë¡œê·¸ì•„ì›ƒ</a></li>
			</ul>
			<ul class="nav2">
				<li><a href="/Admin/AdminUser">íšŒì›ê´€ë¦¬</a></li>
				<li><a href="/Admin/AdminMovie">ì˜í™”ê´€ë¦¬</a></li>
				<li><a href="/Admin/AdminReview">ë¦¬ë·°ê´€ë¦¬</a></li>
			</ul>
		</div>
	</div>
	<div class="list">
		<div class="list-title">ì˜í™” ì •ë³´</div>
			<form action="">
				<table class="detail-table">
					<tr>
						<td class="label-td"><label class="labelname">ì˜í™”ì œëª©</label></td>
						<td><input type="text" class="inputbar" th:value="${moviesDetail.title}" readonly></td>
					</tr>
					<tr>
						<td class="label-td"><label class="labelname">ê°œë´‰ì¼</label></td>
						<td><input type="text" class="inputbar" th:value="${moviesDetail.releaseDate}" readonly></td>
					</tr>
					<tr>
						<td class="label-td"><label class="labelname">ì˜í™”ì„¤ëª…</label></td>
						<td><textarea class="textarea" th:text = "${moviesDetail.overview}"  readonly></textarea>
					</tr>
				</table>
			</form>
	
	
				<table class="table" id ="tableMovie">
					<thead>
						<tr>
							<th>ì˜í™” ApiID</th>
							<th>ì˜í™” ë²ˆí˜¸</th>
							<th>ìœ ì € ë²ˆí˜¸</th>
							<th>ë‹‰ë„¤ì„</th>
							<th>ì¢‹ì•„ìš” ëˆ„ë¥¸ ì‹œê°„</th>
						</tr>
					</thead>	
						
					<!-- th:block  div ì²˜ëŸ¼ html ì†ì„±ì´ ë‚¨ëŠ”ê²Œ ì•„ë‹Œ htmlìì²´ íƒœê·¸ ì—†ì´ ì¡°ê±´ë¬¸ ìƒì„±  -->
					<tbody>
						<th:block th:if="${!#lists.isEmpty(movieUserLikeList)}">	
							<tr th:each = "likeList : ${movieUserLikeList}"
								th:data-url ="@{/Admin/AdminUserDetail/{userId}(userId=${likeList.userId})}"
								onclick="UserDetailLink(this);"
								id = "UserReviewsList">
								<td th:text = "${likeList.apiId}"></td>
								<td th:text = "${likeList.movieId}"></td>
								<td th:text = "${likeList.userId}"></td>
								<td th:text = "${likeList.nickname}"></td>
								<td th:text = "${likeList.likeAt}"></td>
							</tr>
						</th:block>	
							<tr th:if="${#lists.isEmpty(movieUserLikeList)}">
							    <td colspan="5" style="text-align: center; color: black;">ì¢‹ì•„ìš” ëª©ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</td>
							</tr>
					</tbody>	
				</table>
	</div>
	<script>
			function UserDetailLink(rowElement){
				const url = rowElement.getAttribute('data-url');
				if(url){
					window.location.href = url;
				}
			}
	</script>	
</body>
</html>