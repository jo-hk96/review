<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
                  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%2210 0 100 100%22><text y=%22.90em%22 font-size=%2290%22>ğŸ¬</text></svg>"></link>
    <title>ë¦¬ë·°í”ŒëŸ¬ìŠ¤ ê´€ë¦¬ì</title>

<style>
	#UserReviewsList{
		position: relative;
		cursor:pointer;
		
	}
	
	#UserReviewsList:hover{
		background-color: #f0f0f0;
		transition: background-color 0.2s ease;
	}
	
	
	#UserList{
		position: relative;
		cursor:pointer;
	}
	
	#UserList:hover{
		background-color: #f0f0f0;
		transition: background-color 0.2s ease;
	}
</style>    
</head>
<body>
	<div id="header" th:fragment = "header">
		<div class="nav">
			<ul class="nav1">
				<li><a href="/"><img src="/images/logo.png" alt="logo" class="logoimg"></a></li>
				<li><a href="/Admin/AdminHome">ê´€ë¦¬ì í™ˆ</a></li>
				<li class="emphasis-color"><a href="/logout">ë¡œê·¸ì•„ì›ƒ</a></li>
			</ul>
			<ul class="nav2">
				<li><a href="/Admin/AdminUser">íšŒì›ê´€ë¦¬</a></li>
				<li><a href="/Admin/AdminMovie">ì˜í™”ê´€ë¦¬</a></li>
				<li><a href="/Admin/AdminReview">ë¦¬ë·°ê´€ë¦¬</a></li>
			</ul>
		</div>
	</div>
	
	<div class="list">
	<h1>ê´€ë¦¬ì ë©”ì¸</h1>
		<div class="list-title" >ìµœê·¼ ê°€ì…ì 10ëª…</div>
			<table class="table">
				<tr>
					<th>ì•„ì´ë””</th>
					<th>ë‹‰ë„¤ì„</th>
					<th>ì´ë©”ì¼</th>
					<th>ê°€ì…ì¼</th>
				</tr>
				<tr th:each ="user : ${allUserList}"
					th:data-url ="@{/Admin/AdminUserDetail/{userId}(userId=${user.userId})}"
					onclick="UserDetailLink(this);" id = "UserList">
					<td th:text="${user.userId}"></td>
					<td th:text="${user.nickname}"></td>
					<td th:text="${user.email}"></td>
					<td th:text="${#temporals.format(user.createdAt , 'yyyy-MM-dd HH:mm:ss')}"></td>
				</tr>
			</table>
		<div class="list-title" >ì „ì²´ ë¦¬ë·° 10ê°œ</div>
			<table class="table">
				<tr>
					<th>ë²ˆí˜¸</th>
					<th>ë‹‰ë„¤ì„</th>
					<th>ì˜í™”ì œëª©</th>
					<th>ë¦¬ë·°ë‚´ìš©</th>
					<th>ë“±ë¡ì¼</th>
				</tr>
				<tr th:each = "reviews : ${allUserReview}" 
					th:data-url="@{/Admin/AdminReviewDetail/{reviewId}(reviewId=${reviews.reviewId})}"
					onclick="UserDetailLink(this);"
					id = "UserReviewsList">
					<td th:text ="${reviews.reviewId}"></td>
					<td th:text ="${reviews.nickname}" ></td>
					<td th:text ="${reviews.title}"></td>
					<td th:text ="${reviews.comment}"></td>
					<td th:text ="${reviews.regDate}">
				</tr>
				
			</table>
	</div>
	
	<!-- tr ë§í¬ í´ë¦­ ì´ë™ ìŠ¤í¬ë¦½íŠ¸  -->
	<script>
		function UserDetailLink(rowElement){
			const url = rowElement.getAttribute('data-url');
			if(url){
				window.location.href = url;
			}
		}
	</script>
	
</body>
</html>