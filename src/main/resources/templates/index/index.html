<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
                  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/top_rate.css">
    <link rel="stylesheet" href="/css/now_playing.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/header.css">
    <title>영화 정보 보기</title>
</head>

<style>
		.review-container {
		  display: flex; /* 자식 요소를 가로로 나열 */
		  flex-wrap: wrap; /* 공간이 부족하면 다음 줄로 넘어가게 함 */
		  gap: 20px; /* 카드 사이의 간격 */
		  justify-content: center; /* 리뷰 카드를 가운데 정렬 (선택 사항) */
		}
		.review-card {
		  width: 250px;
		  border: 1px solid #ddd; /* 10x를 1px로 수정 */
		  border-radius: 12px;
		  padding: 12px;
		  box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
		}
</style>


<body>
	<body>
	<!--익명사용자(비로그인상태)isAnonymous -->
	<!--사용자(로그인상태)isAuthenticated -->	  
        <div id="header" th:fragment="header">                  
	        <a href="/" class="logo">
	           <img th:src="@{/images/logo.png}" alt ="로고">
	        </a>   
       	<div sec:authorize="isAuthenticated()" class = "headerLeft">
       	
       		<!-- ROLE_ADMIN일 경우 -->
		    <span sec:authorize="hasRole('ROLE_ADMIN')">
		        관리자 : <span sec:authentication="principal.pname"></span>
		        		 [<span sec:authentication="principal.nickname"></span>]
		        <b><a href="/Admin/AdminPage">사이트관리</a></b>
		    </span>
		    
		    <!-- ROLE_ADMIN이 아닐경우 -->
		    <span sec:authorize="!hasRole('ROLE_ADMIN')">
		        <span sec:authentication="principal.pname"></span>
		        [<span sec:authentication="principal.nickname"></span>]
		    </span>
	    </div>
	
	    <div class="headerRight">
			<div class ="userIndex" sec:authorize="isAnonymous()">
				<a href = "/UserLoginForm">로그인</a>
			</div>
			
			<div class ="userIndex"  sec:authorize="isAuthenticated()">
				<a href = "/UserMypage">내정보</a>
				<a href = "/logout">로그아웃</a>
			</div>
		    <div>
			     <form action ="/MoviesList" method ="get" > 
			    	 검색 : <input type ="text" id = 'movieSearch' name = "movieSearch" 
			    	 			placeholder="영화 제목을 입력해주세요. ex)반지,반지의,반지의 제왕">
			    	<button type = "submit">검색</button>
			    </form>
		    </div>
         </div>
	</div>
	
	
<div id = "indexMovieList">
  	 <!-- 개봉중인 영화  -->
	 <div class="slider-container2">
  		 	<h1><a href ="/MoviesList">현재상영중</a></h1>
		    <button id="prev-btn2" class="nav-btn2">&lt;</button> 
		  	  <div id="movie-list2"></div>
		    <button id="next-btn2" class="nav-btn2">&gt;</button> 
	 </div>
 	 <div id="loading-indicator2">데이터를 불러오는 중...</div>
     	
	  <!--최고평점-->
	  <div class="slider-container">
	  		<h1><a href ="/MoviesList">최고평점</a></h1>
		    <button id="prev-btn" class="nav-btn">&lt;</button> 
		    	<div id="movie-list"></div>
		    <button id="next-btn" class="nav-btn">&gt;</button> 
	  </div>
	  <div id="loading-indicator">데이터를 불러오는 중...</div>
  		<hr>
</div>

	
<div class = "slider-container2">	
	<h2>최신 리뷰</h2>
	<div class="review-container">
		  <div class="review-card" th:each ="review : ${recentReviews}">
		  	<p><b>영화 제목 : [[${review.title}]] </b></p>
		    <p>작성자: [[${review.nickname}]]</p>
		    <p>리뷰 : [[${review.comment}]]</p>
		    <p class="rating">[[${review.rating}]]</p>
		    <div class="footer">
		  </div>
		  
		   <div>
		     <span>[[${review.regDate}]]</span>
		   </div>
		  </div>	  
	</div>
	<p th:if ="${recentReviews.isEmpty()}">아직 작성된 리뷰가 없습니다.</p>
</div>

	<!-- -----------------------푸터--------------------------- -->
    <div id = "footer" th:fragment = "footer">
        <p><strong>ReviewPlus</strong></p>
        <p>리뷰플러스에서 사용된 모든 영화 정보는 
           <span style ="font-size:15px; font-weight:bold" >
                  <a href ="https://www.themoviedb.org/">
                        TMDb(The Movie Database)
                  </a>
         </span> 통해 제공되었습니다.
        </p>
        <p>주소:못골번영로 56번길 8<br>© 2025 ReviewPlus.All Rights Reserved.</p>
    </div>
    <!-- --------------------------------------------------------------------- -->
		
 <!-- 영화검색.js -->	
 <script src="js/movie_search.js"></script>
	
 <!--영화 슬라이더 -->
 <script src="js/now_playing.js" type="module"></script>
 <script src="js/top_rate.js" type="module"></script>
 
</body>
</html>